{"ast":null,"code":"import _slicedToArray from \"/home/jacob/eclipse-workspace/darkmode-p2/220321-Java-React-Team2-P2/login-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/jacob/eclipse-workspace/darkmode-p2/220321-Java-React-Team2-P2/login-app/src/Login.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './Utils/Common';\n\nfunction Login(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n  const username = useFormInput('');\n  const password = useFormInput('');\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1]; // handle button click of login form\n\n\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n    axios.post('http://localhost:8080/api/auth/signin', {\n      username: username.value,\n      password: password.value\n    }).then(response => {\n      setLoading(false);\n      setUserSession(response.data.accessToken, response.data.username, response.data.email);\n      localStorage.setItem('user_id', response.data.user_id);\n      localStorage.setItem('TokenHeader', \"Bearer \" + response.data.accessToken);\n      props.history.push('/account');\n    }).catch(error => {\n      setLoading(false);\n      if (error.response.status === 401) setError(error.response.data.message);else setError(\"Something went wrong. Please try again later.\");\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, \"Login\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, \"Username\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }), React.createElement(\"input\", Object.assign({\n    type: \"text\"\n  }, username, {\n    autoComplete: \"new-password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \"Password\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }), React.createElement(\"input\", Object.assign({\n    type: \"password\"\n  }, password, {\n    autoComplete: \"new-password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }))), error && React.createElement(React.Fragment, null, React.createElement(\"small\", {\n    style: {\n      color: 'red'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, error), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: loading ? 'Loading...' : 'Login',\n    onClick: handleLogin,\n    disabled: loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }));\n}\n\nconst useFormInput = initialValue => {\n  const _useState5 = useState(initialValue),\n        _useState6 = _slicedToArray(_useState5, 2),\n        value = _useState6[0],\n        setValue = _useState6[1];\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/jacob/eclipse-workspace/darkmode-p2/220321-Java-React-Team2-P2/login-app/src/Login.js"],"names":["React","useState","axios","setUserSession","Login","props","loading","setLoading","username","useFormInput","password","error","setError","handleLogin","post","value","then","response","data","accessToken","email","localStorage","setItem","user_id","history","push","catch","status","message","marginTop","color","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './Utils/Common';\n\nfunction Login(props) {\n  const [loading, setLoading] = useState(false);\n  const username = useFormInput('');\n  const password = useFormInput('');\n  const [error, setError] = useState(null);\n\n  // handle button click of login form\n  const handleLogin = () => {\n    setError(null);\n    setLoading(true);\n    axios.post('http://localhost:8080/api/auth/signin', { username: username.value, password: password.value }).then(response => {\n      setLoading(false);\n      setUserSession(response.data.accessToken, response.data.username,response.data.email );\n      localStorage.setItem('user_id',response.data.user_id);\n      localStorage.setItem('TokenHeader', \"Bearer \" +response.data.accessToken)\n      props.history.push('/account')\n    }).catch(error => {\n      setLoading(false);\n      if (error.response.status === 401) setError(error.response.data.message);\n      else setError(\"Something went wrong. Please try again later.\");\n    });\n  }\n\n  return (\n    <div>\n      Login<br /><br />\n      <div>\n        Username<br />\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\n      </div>\n      <div style={{ marginTop: 10 }}>\n        Password<br />\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\n      </div>\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n      <input type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />\n    </div>\n  );\n}\n\nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  }\n  return {\n    value,\n    onChange: handleChange\n  }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}